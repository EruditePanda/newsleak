<!--
  ~ Copyright (C) 2016 Language Technology Group and Interactive Graphics Systems Group, Technische UniversitÃ¤t Darmstadt, Germany
  ~
  ~ This program is free software: you can redistribute it and/or modify
  ~ it under the terms of the GNU Affero General Public License as
  ~ published by the Free Software Foundation, either version 3 of the
  ~ License, or (at your option) any later version.
  ~
  ~ This program is distributed in the hope that it will be useful,
  ~ but WITHOUT ANY WARRANTY; without even the implied warranty of
  ~ MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
  ~ GNU Affero General Public License for more details.
  ~
  ~ You should have received a copy of the GNU Affero General Public License
  ~ along with this program. If not, see <http://www.gnu.org/licenses/>.
  -->

<div style="padding: 15px;" id="documents-view">
<p style="font-size:16px">Document Overview: <span ng-show="hits > 0"> <b>{{hits}}</b> hits out of <b>{{sourceShared.documentsInDB}}</b> docs</span> </p>
    <md-autocomplete
            md-no-cache
            md-selected-item="selectedItem"
            md-search-text="searchText"
            md-items="label in querySearch(searchText)"
            md-selected-item-change="selectedTagChange(label)"
            md-item-text="label"
            md-min-length="0"
            placeholder="Search for documents by tag">
        <md-item-template>
            <span md-highlight-text="searchText" md-highlight-flags="^i">{{ label }}</span>
        </md-item-template>
        <md-not-found>
            No tags matching "{{ searchText }}" were found.
            <a>Create a new one!</a>
        </md-not-found>
    </md-autocomplete>

    <p></p>
    <!--<p ng-show="hits > 0">Hits: {{hits}} out of {{sourceShared.documentsInDB}}</p>-->
    <div class="btn btn-default load-more-button" ng-show="false" ng-click="loadMore()">
        Load more documents
        <i class="glyphicon glyphicon-repeat"></i>
    </div>
    <div class="alert alert-info" ng-show="sourceShared.documentList.length == 0">
        <p>No document for current set filters available. Filter less to get document list.</p>
    </div>
    <script type="text/ng-template" id="doc_tooltip_tmpl">


        <div>
            <ul class="list-group-item">
                <li class="list-group-item" ng-repeat="(key, value) in item.metadata"><span style="font-weight: 700">{{key}}:</span> {{value}}</li>
            </ul>
        </div>
    </script>

    <div ng-show="sourceShared.documentList.length > 0" class="docs-ul">
        <b style="text-decoration: underline;">{{ sourceShared.documentListInfo }}</b>

        <md-content>
            <md-list flex>
                <md-list-item class="" ng-repeat="item in sourceShared.documentList" ng-click="loadFullDocument(item.id)">
                        {{ item.metadata.Subject }} #{{item.id}}
                    <md-divider ng-if="!$last"></md-divider>
                    <md-tooltip md-direction="right">
                        <md-content>
                        <md-list flex>
                            <md-subheader>Metadata for #{{item.id}}</md-subheader>
                            <md-list-item class="" ng-repeat="(key, value) in item.metadata">
                                <span style="font-weight: 700">{{key}}:</span> {{value}}
                            </md-list-item>
                        </md-list>
                        </md-content>
                    </md-tooltip>

                </md-list-item>
            </md-list>
        </md-content>
        <!-- Show toast when no documents in the iterator and the doc list is not empty -->
        <span ng-init="showAllLoaded()" ng-if="iteratorEmpty && hits > 0"></span>
    </div>

    <div class="docs-loading" ng-show="showLoading"><span>Loading ...</span></div>
</div>